{% extends "base.html" %} {% block content %} {% load static %}
<div class="container-fluid">
  <div class="row">
    <!-- Left Sidebar -->
    <div class="col-md-2 border-end" style="min-height: 80vh">
      <h4 class="my-4">Explore Topics</h4>
      <div>
        <a
          class="btn btn-outline-primary border-0 opacity-75 text-black px-3 mb-3 d-flex align-items-center justify-content-between"
          href="{% url 'home' %}"
          ><span>All Topics</span>
          <span class="badge bg-secondary ms-5">{{rooms_count}}</span>
        </a>
      </div>
      <div class="mt-2">
        {% if topics %} {% for topic in topics %}
        <a
          class="btn btn-outline-primary opacity-75 border-0 text-start text-black d-flex align-items-center justify-content-between"
          href="{% url 'home' %}?q={{ topic.name|urlencode }}"
          ><span>{{ topic.name }}</span>
          <span class="badge bg-secondary me-1"
            >{{topic.room_set.all.count}}</span
          ></a
        ><br />
        {% endfor %} {% else %}
        <p>No topics yet.</p>
        {% endif %}
      </div>
    </div>

    <!-- Main Content -->
    <div class="col-md-6 mx-auto px-3">
      {% include "room_form.html" %}
      <h4 class="mt-4">Explore Available Rooms</h4>
      <p>Join a room to start chatting</p>
      <!-- filepath: d:\codes\coLearner\templates\home.html -->
      <div class="row">
        {% if rooms %} {% for room in rooms %}
        <!-- filepath: d:\codes\coLearner\templates\home.html -->
        <div class="col-md-6 mb-3">
          <div
            class="d-flex flex-column justify-content-between p-4 border rounded h-100 border-secondary border-opacity-25 bg-light"
            style="min-height: 220px"
          >
            <div class="position-relative">
              <h4>{{room.name}}</h4>
              <span class="badge text-bg-primary mb-4">{{room.topic}}</span>
              <a href="{% url 'room' room.id %}" class="stretched-link"></a>
              <p class="text-start small text-muted">
                {{ room.description|truncatewords:15 }}
              </p>
            </div>
            <div class="text-start small text-muted">
              Created by -
              <a href="{% url 'profile' room.host.id %}"
                >@{{ room.host.username }}</a
              >
            </div>
          </div>
        </div>
        {% if forloop.counter|divisibleby:2 %}
      </div>
      <div class="row">
        {% endif %} {% endfor %} {% else %}
        <p>
          No rooms yet. Be the first to
          <button
            class="btn btn-link p-0 mb-1"
            data-bs-toggle="modal"
            data-bs-target="#createRoomModal"
          >
            create</button
          >.
        </p>
        {% endif %}
      </div>
    </div>

    <!-- Right Sidebar (Empty for now) -->
    <div class="col-md-3"></div>
  </div>
</div>
{% endblock %}
