{% extends "base.html" %} {% block content %} {% load static %}
<div class="container-fluid">
  <div class="row">
    <!-- Left Sidebar -->
    <div class="col-md-2 border-end" style="min-height: 80vh">
      <h4 class="mt-4">Topics</h4>
      <div><a href="{% url 'home' %}">All Topics</a></div>
      <div class="mt-2">
        {% if topics %} {% for topic in topics %}
        <a href="{% url 'home' %}?q={{ topic.name|urlencode }}"
          >{{ topic.name }}</a
        ><br />
        {% endfor %} {% else %}
        <p>No topics yet.</p>
        {% endif %}
      </div>
    </div>

    <!-- Main Content -->
    <div class="col-md-6 mx-auto px-3">
      {% include "room_form.html" %}
      <h4 class="mt-4">Explore Available Rooms</h4>
      <p>Join a room to start chatting</p>
      <h3>Total Rooms: {{ rooms_count }}</h3>
      <!-- filepath: d:\codes\coLearner\templates\home.html -->
      <div class="row">
        {% if rooms %} {% for room in rooms %}
        <!-- filepath: d:\codes\coLearner\templates\home.html -->
        <div class="col-md-6 mb-3">
          <div
            class="d-flex flex-column justify-content-between p-4 border rounded h-100 border-secondary border-opacity-25"
            style="min-height: 220px"
          >
            <div class="position-relative">
              <h5>{{room.name}}</h5>
              <a href="{% url 'room' room.id %}" class="stretched-link"></a
              ><br />
              <p>{{ room.description }}</p>
              <p><strong>Topic</strong>: {{ room.topic }}</p>
              {% if user == room.host %}
              <a href="{% url 'update_room' room.id %}">Update Room</a>
              <a href="{% url 'delete_room' room.id %}">Delete Room</a>
              {% endif %}
            </div>
            <div class="text-start small text-muted">
              Created by -
              <a href="{% url 'profile' room.host.id %}"
                >@{{ room.host.username }}</a
              >
            </div>
          </div>
        </div>
        {% if forloop.counter|divisibleby:2 %}
      </div>
      <div class="row">
        {% endif %} {% endfor %} {% else %}
        <p>
          No rooms yet. Be the first to
          <button
            class="btn btn-link p-0"
            data-bs-toggle="modal"
            data-bs-target="#createRoomModal"
          >
            create one</button
          >.
        </p>
        {% endif %}
      </div>
    </div>

    <!-- Right Sidebar (Empty for now) -->
    <div class="col-md-3"></div>
  </div>
</div>
{% endblock %}
